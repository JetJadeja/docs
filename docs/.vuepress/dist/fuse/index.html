<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Fuse | @rari-capital/docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Documentation for the Rari Protocol">
    
    <link rel="preload" href="/assets/css/0.styles.76591183.css" as="style"><link rel="preload" href="/assets/js/app.248c6343.js" as="script"><link rel="preload" href="/assets/js/2.f6688df7.js" as="script"><link rel="preload" href="/assets/js/12.3442bb6b.js" as="script"><link rel="prefetch" href="/assets/js/10.688ee774.js"><link rel="prefetch" href="/assets/js/11.2ec38f26.js"><link rel="prefetch" href="/assets/js/13.2f857a96.js"><link rel="prefetch" href="/assets/js/14.db9d8fa8.js"><link rel="prefetch" href="/assets/js/3.d2657b89.js"><link rel="prefetch" href="/assets/js/4.c4d2910c.js"><link rel="prefetch" href="/assets/js/5.5287c8c7.js"><link rel="prefetch" href="/assets/js/6.58dd6500.js"><link rel="prefetch" href="/assets/js/7.32a048b4.js"><link rel="prefetch" href="/assets/js/8.beb5dcf7.js"><link rel="prefetch" href="/assets/js/9.1d967ec3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.76591183.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">@rari-capital/docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/yag/" class="nav-link">
  Yield Aggregator
</a></div><div class="nav-item"><a href="/fuse/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Fuse
</a></div> <a href="https://github.com/Rari-Capital/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/yag/" class="nav-link">
  Yield Aggregator
</a></div><div class="nav-item"><a href="/fuse/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Fuse
</a></div> <a href="https://github.com/Rari-Capital/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/fuse/" aria-current="page" class="active sidebar-link">Fuse</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fuse/#mint" class="sidebar-link">Mint</a></li><li class="sidebar-sub-header"><a href="/fuse/#redeem" class="sidebar-link">Redeem</a></li><li class="sidebar-sub-header"><a href="/fuse/#redeem-underlying" class="sidebar-link">Redeem Underlying</a></li><li class="sidebar-sub-header"><a href="/fuse/#borrow" class="sidebar-link">Borrow</a></li><li class="sidebar-sub-header"><a href="/fuse/#repay-borrow" class="sidebar-link">Repay Borrow</a></li><li class="sidebar-sub-header"><a href="/fuse/#repay-borrow-behalf" class="sidebar-link">Repay Borrow Behalf</a></li><li class="sidebar-sub-header"><a href="/fuse/#transfer" class="sidebar-link">Transfer</a></li><li class="sidebar-sub-header"><a href="/fuse/#liquidate-borrow" class="sidebar-link">Liquidate Borrow</a></li><li class="sidebar-sub-header"><a href="/fuse/#key-events" class="sidebar-link">Key Events</a></li><li class="sidebar-sub-header"><a href="/fuse/#error-codes" class="sidebar-link">Error Codes</a></li><li class="sidebar-sub-header"><a href="/fuse/#failure-info" class="sidebar-link">Failure Info</a></li><li class="sidebar-sub-header"><a href="/fuse/#exchange-rate" class="sidebar-link">Exchange Rate</a></li><li class="sidebar-sub-header"><a href="/fuse/#get-cash" class="sidebar-link">Get Cash</a></li><li class="sidebar-sub-header"><a href="/fuse/#total-borrow" class="sidebar-link">Total Borrow</a></li><li class="sidebar-sub-header"><a href="/fuse/#borrow-balance" class="sidebar-link">Borrow Balance</a></li><li class="sidebar-sub-header"><a href="/fuse/#borrow-rate" class="sidebar-link">Borrow Rate</a></li><li class="sidebar-sub-header"><a href="/fuse/#total-supply" class="sidebar-link">Total Supply</a></li><li class="sidebar-sub-header"><a href="/fuse/#underlying-balance" class="sidebar-link">Underlying Balance</a></li><li class="sidebar-sub-header"><a href="/fuse/#supply-rate" class="sidebar-link">Supply Rate</a></li><li class="sidebar-sub-header"><a href="/fuse/#total-reserves" class="sidebar-link">Total Reserves</a></li><li class="sidebar-sub-header"><a href="/fuse/#reserve-factor" class="sidebar-link">Reserve Factor</a></li><li class="sidebar-sub-header"><a href="/fuse/#interpreting-exchange-rates" class="sidebar-link">Interpreting Exchange Rates</a></li><li class="sidebar-sub-header"><a href="/fuse/#calculating-accrued-interest" class="sidebar-link">Calculating Accrued Interest</a></li><li class="sidebar-sub-header"><a href="/fuse/#calculating-the-apy-using-rate-per-block" class="sidebar-link">Calculating the APY Using Rate Per Block</a></li><li class="sidebar-sub-header"><a href="/fuse/#gas-costs" class="sidebar-link">Gas Costs</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="fuse"><a href="#fuse" class="header-anchor">#</a> Fuse</h1> <p>The Fuse platform enables anyone to instantly create their own lending and borrowing pool. Below you will find documentation for the Fuse platform. Each Fuse pool is essentially a fork of the Compound protocol.</p> <h2 id="mint"><a href="#mint" class="header-anchor">#</a> Mint</h2> <p>The mint function transfers an asset into the protocol, which begins accumulating interest based on the current <a href="https://compound.finance/docs/fTokens#supply-rate" target="_blank" rel="noopener noreferrer">Supply Rate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for the asset. The user receives a quantity of fTokens equal to the underlying tokens supplied, divided by the current <a href="https://compound.finance/docs/fTokens#exchange-rate" target="_blank" rel="noopener noreferrer">Exchange Rate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h4 id="ferc20"><a href="#ferc20" class="header-anchor">#</a> fERC20</h4> <div class="language- extra-class"><pre class="language-text"><code>function mint(uint mintAmount) returns (uint)
</code></pre></div><ul><li>msg.sender: The account which shall supply the asset, and own the minted fTokens.</li> <li>mintAmount: The amount of the asset to be supplied, in units of the underlying asset.</li> <li>RETURN: 0 on success, otherwise an <a href="https://compound.finance/docs/fTokens#error-codes" target="_blank" rel="noopener noreferrer">Error code<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>Before supplying an asset, users must first <a href="https://eips.ethereum.org/EIPS/eip-20#approve" target="_blank" rel="noopener noreferrer">approve<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> the fToken to access their token balance.</p> <h4 id="fether"><a href="#fether" class="header-anchor">#</a> fEther</h4> <div class="language- extra-class"><pre class="language-text"><code>function mint() payable
</code></pre></div><ul><li>msg.valuepayable: The amount of ether to be supplied, in wei.</li> <li>msg.sender: The account which shall supply the ether, and own the minted fTokens.</li> <li>RETURN: No return, reverts on error.</li></ul> <h4 id="solidity"><a href="#solidity" class="header-anchor">#</a> Solidity</h4> <div class="language- extra-class"><pre class="language-text"><code>Erc20 underlying = Erc20(0xToken...);     // get a handle for the underlying asset contract

fERC20 fToken = fERC20(0x3FDA...);        // get a handle for the corresponding fToken contract

underlying.approve(address(fToken), 100); // approve the transfer

assert(fToken.mint(100) == 0);            // mint the fTokens and assert there is no error
</code></pre></div><h4 id="web3-1-0"><a href="#web3-1-0" class="header-anchor">#</a> Web3 1.0</h4> <div class="language- extra-class"><pre class="language-text"><code>const fToken = fEther.at(0x3FDB...);

await fToken.methods.mint().send({from: myAccount, value: 50});
</code></pre></div><h2 id="redeem"><a href="#redeem" class="header-anchor">#</a> Redeem</h2> <p>The redeem function converts a specified quantity of fTokens into the underlying asset, and returns them to the user. The amount of underlying tokens received is equal to the quantity of fTokens redeemed, multiplied by the current <a href="https://compound.finance/docs/fTokens#exchange-rate" target="_blank" rel="noopener noreferrer">Exchange Rate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. The amount redeemed must be less than the user's <a href="https://compound.finance/docs/comptroller#account-liquidity" target="_blank" rel="noopener noreferrer">Account Liquidity<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and the market's available liquidity.</p> <h4 id="ferc20-fether"><a href="#ferc20-fether" class="header-anchor">#</a> fERC20 / fEther</h4> <div class="language- extra-class"><pre class="language-text"><code>function redeem(uint redeemTokens) returns (uint)
</code></pre></div><ul><li>msg.sender: The account to which redeemed funds shall be transferred.</li> <li>redeemTokens: The number of fTokens to be redeemed.</li> <li>RETURN: 0 on success, otherwise an <a href="https://compound.finance/docs/fTokens#error-codes" target="_blank" rel="noopener noreferrer">Error code<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="solidity-2"><a href="#solidity-2" class="header-anchor">#</a> Solidity</h4> <div class="language- extra-class"><pre class="language-text"><code>fEther fToken = fEther(0x3FDB...);

require(fToken.redeem(7) == 0, &quot;something went wrong&quot;);
</code></pre></div><h4 id="web3-1-0-2"><a href="#web3-1-0-2" class="header-anchor">#</a> Web3 1.0</h4> <div class="language- extra-class"><pre class="language-text"><code>const fToken = fERC20.at(0x3FDA...);

fToken.methods.redeem(1).send({from: ...});
</code></pre></div><h2 id="redeem-underlying"><a href="#redeem-underlying" class="header-anchor">#</a> Redeem Underlying</h2> <p>The redeem underlying function converts fTokens into a specified quantity of the underlying asset, and returns them to the user. The amount of fTokens redeemed is equal to the quantity of underlying tokens received, divided by the current <a href="https://compound.finance/docs/fTokens#exchange-rate" target="_blank" rel="noopener noreferrer">Exchange Rate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. The amount redeemed must be less than the user's <a href="https://compound.finance/docs/comptroller#account-liquidity" target="_blank" rel="noopener noreferrer">Account Liquidity<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and the market's available liquidity.</p> <h4 id="ferc20-fether-2"><a href="#ferc20-fether-2" class="header-anchor">#</a> fERC20 / fEther</h4> <div class="language- extra-class"><pre class="language-text"><code>function redeemUnderlying(uint redeemAmount) returns (uint)
</code></pre></div><ul><li>msg.sender: The account to which redeemed funds shall be transferred.</li> <li>redeemAmount: The amount of underlying to be redeemed.</li> <li>RETURN: 0 on success, otherwise an <a href="https://compound.finance/docs/fTokens#error-codes" target="_blank" rel="noopener noreferrer">Error code<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="solidity-3"><a href="#solidity-3" class="header-anchor">#</a> Solidity</h4> <div class="language- extra-class"><pre class="language-text"><code>fEther fToken = fEther(0x3FDB...);

require(fToken.redeemUnderlying(50) == 0, &quot;something went wrong&quot;);
</code></pre></div><h4 id="web3-1-0-3"><a href="#web3-1-0-3" class="header-anchor">#</a> Web3 1.0</h4> <div class="language- extra-class"><pre class="language-text"><code>const fToken = fERC20.at(0x3FDA...);

fToken.methods.redeemUnderlying(10).send({from: ...});
</code></pre></div><h2 id="borrow"><a href="#borrow" class="header-anchor">#</a> Borrow</h2> <p>The borrow function transfers an asset from the protocol to the user, and creates a borrow balance which begins accumulating interest based on the <a href="https://compound.finance/docs/fTokens#borrow-rate" target="_blank" rel="noopener noreferrer">Borrow Rate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for the asset. The amount borrowed must be less than the user's <a href="https://compound.finance/docs/comptroller#account-liquidity" target="_blank" rel="noopener noreferrer">Account Liquidity<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and the market's available liquidity.</p> <p>To borrow Ether, the borrower must be 'payable' (solidity).</p> <h4 id="ferc20-fether-3"><a href="#ferc20-fether-3" class="header-anchor">#</a> fERC20 / fEther</h4> <div class="language- extra-class"><pre class="language-text"><code>function borrow(uint borrowAmount) returns (uint)
</code></pre></div><ul><li>msg.sender: The account to which borrowed funds shall be transferred.</li> <li>borrowAmount : The amount of the underlying asset to be borrowed.</li> <li>RETURN: 0 on success, otherwise an <a href="https://compound.finance/docs/fTokens#error-codes" target="_blank" rel="noopener noreferrer">Error code<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="solidity-4"><a href="#solidity-4" class="header-anchor">#</a> Solidity</h4> <div class="language- extra-class"><pre class="language-text"><code>fERC20 fToken = fERC20(0x3FDA...);

require(fToken.borrow(100) == 0, &quot;got collateral?&quot;);
</code></pre></div><h4 id="web3-1-0-4"><a href="#web3-1-0-4" class="header-anchor">#</a> Web3 1.0</h4> <div class="language- extra-class"><pre class="language-text"><code>const fToken = fEther.at(0x3FDB...);

await fToken.methods.borrow(50).send({from: 0xMyAccount});
</code></pre></div><h2 id="repay-borrow"><a href="#repay-borrow" class="header-anchor">#</a> Repay Borrow</h2> <p>The repay function transfers an asset into the protocol, reducing the user's borrow balance.</p> <h4 id="ferc20-2"><a href="#ferc20-2" class="header-anchor">#</a> fERC20</h4> <div class="language- extra-class"><pre class="language-text"><code>function repayBorrow(uint repayAmount) returns (uint)
</code></pre></div><ul><li>msg.sender: The account which borrowed the asset, and shall repay the borrow.</li> <li>repayAmount: The amount of the underlying borrowed asset to be repaid. A value of -1 (i.e. 2256 - 1) can be used to repay the full amount.</li> <li>RETURN: 0 on success, otherwise an <a href="https://compound.finance/docs/fTokens#error-codes" target="_blank" rel="noopener noreferrer">Error code<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>Before repaying an asset, users must first <a href="https://eips.ethereum.org/EIPS/eip-20#approve" target="_blank" rel="noopener noreferrer">approve<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> the fToken to access their token balance.</p> <h4 id="fether-2"><a href="#fether-2" class="header-anchor">#</a> fEther</h4> <div class="language- extra-class"><pre class="language-text"><code>function repayBorrow() payable
</code></pre></div><ul><li>msg.valuepayable: The amount of ether to be repaid, in wei.</li> <li>msg.sender: The account which borrowed the asset, and shall repay the borrow.</li> <li>RETURN: No return, reverts on error.</li></ul> <h4 id="solidity-5"><a href="#solidity-5" class="header-anchor">#</a> Solidity</h4> <div class="language- extra-class"><pre class="language-text"><code>fEther fToken = fEther(0x3FDB...);

require(fToken.repayBorrow.value(100)() == 0, &quot;transfer approved?&quot;);
</code></pre></div><h4 id="web3-1-0-5"><a href="#web3-1-0-5" class="header-anchor">#</a> Web3 1.0</h4> <div class="language- extra-class"><pre class="language-text"><code>const fToken = fERC20.at(0x3FDA...);

fToken.methods.repayBorrow(10000).send({from: ...});
</code></pre></div><h2 id="repay-borrow-behalf"><a href="#repay-borrow-behalf" class="header-anchor">#</a> Repay Borrow Behalf</h2> <p>The repay function transfers an asset into the protocol, reducing the target user's borrow balance.</p> <h4 id="ferc20-3"><a href="#ferc20-3" class="header-anchor">#</a> fERC20</h4> <div class="language- extra-class"><pre class="language-text"><code>function repayBorrowBehalf(address borrower, uint repayAmount) returns (uint)
</code></pre></div><ul><li>msg.sender: The account which shall repay the borrow.</li> <li>borrower: The account which borrowed the asset to be repaid.</li> <li>repayAmount: The amount of the underlying borrowed asset to be repaid. A value of -1 (i.e. 2256 - 1) can be used to repay the full amount.</li> <li>RETURN: 0 on success, otherwise an <a href="https://compound.finance/docs/fTokens#error-codes" target="_blank" rel="noopener noreferrer">Error code<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>Before repaying an asset, users must first <a href="https://eips.ethereum.org/EIPS/eip-20#approve" target="_blank" rel="noopener noreferrer">approve<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> the fToken to access their token balance.</p> <h4 id="fether-3"><a href="#fether-3" class="header-anchor">#</a> fEther</h4> <div class="language- extra-class"><pre class="language-text"><code>function repayBorrowBehalf(address borrower) payable
</code></pre></div><ul><li>msg.valuepayable: The amount of ether to be repaid, in wei.</li> <li>msg.sender: The account which shall repay the borrow.</li> <li>borrower: The account which borrowed the asset to be repaid.</li> <li>RETURN: No return, reverts on error.</li></ul> <h4 id="solidity-6"><a href="#solidity-6" class="header-anchor">#</a> Solidity</h4> <div class="language- extra-class"><pre class="language-text"><code>fEther fToken = fEther(0x3FDB...);

require(fToken.repayBorrowBehalf.value(100)(0xBorrower) == 0, &quot;transfer approved?&quot;);
</code></pre></div><h4 id="web3-1-0-6"><a href="#web3-1-0-6" class="header-anchor">#</a> Web3 1.0</h4> <div class="language- extra-class"><pre class="language-text"><code>const fToken = fERC20.at(0x3FDA...);

await fToken.methods.repayBorrowBehalf(0xBorrower, 10000).send({from: 0xPayer});
</code></pre></div><h2 id="transfer"><a href="#transfer" class="header-anchor">#</a> Transfer</h2> <p>Transfer is an ERC-20 method that allows accounts to send tokens to other Ethereum addresses. A fToken transfer will fail if the account has <a href="https://compound.finance/docs/comptroller#enter-markets" target="_blank" rel="noopener noreferrer">entered<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> that fToken market and the transfer would have put the account into a state of negative <a href="https://compound.finance/docs/comptroller#account-liquidity" target="_blank" rel="noopener noreferrer">liquidity<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h4 id="ferc20-fether-4"><a href="#ferc20-fether-4" class="header-anchor">#</a> fERC20 / fEther</h4> <div class="language- extra-class"><pre class="language-text"><code>function transfer(address recipient, uint256 amount) returns (bool)
</code></pre></div><ul><li>recipient: The transfer recipient address.</li> <li>amount: The amount of fTokens to transfer.</li> <li>RETURN: Returns a boolean value indicating whether or not the operation succeeded.</li></ul> <h4 id="solidity-7"><a href="#solidity-7" class="header-anchor">#</a> Solidity</h4> <div class="language- extra-class"><pre class="language-text"><code>fEther fToken = fEther(0x3FDB...);

fToken.transfer(0xABCD..., 100000000000);
</code></pre></div><h4 id="web3-1-0-7"><a href="#web3-1-0-7" class="header-anchor">#</a> Web3 1.0</h4> <div class="language- extra-class"><pre class="language-text"><code>const fToken = fERC20.at(0x3FDA...);

await fToken.methods.transfer(0xABCD..., 100000000000).send({from: 0xSender});
</code></pre></div><h2 id="liquidate-borrow"><a href="#liquidate-borrow" class="header-anchor">#</a> Liquidate Borrow</h2> <p>A user who has negative <a href="https://compound.finance/docs/comptroller#account-liquidity" target="_blank" rel="noopener noreferrer">account liquidity<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is subject to <a href="https://compound.finance/docs/fTokens#liquidate-borrow" target="_blank" rel="noopener noreferrer">liquidation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> by other users of the protocol to return his/her account liquidity back to positive (i.e. above the collateral requirement). When a liquidation occurs, a liquidator may repay some or all of an outstanding borrow on behalf of a borrower and in return receive a discounted amount of collateral held by the borrower; this discount is defined as the liquidation incentive.</p> <p>A liquidator may close up to a certain fixed percentage (i.e. close factor) of any individual outstanding borrow of the underwater account. Unlike in v1, liquidators must interact with each fToken contract in which they wish to repay a borrow and seize another asset as collateral. When collateral is seized, the liquidator is transferred fTokens, which they may redeem the same as if they had supplied the asset themselves. Users must approve each fToken contract before calling liquidate (i.e. on the borrowed asset which they are repaying), as they are transferring funds into the contract.</p> <h4 id="ferc20-4"><a href="#ferc20-4" class="header-anchor">#</a> fERC20</h4> <div class="language- extra-class"><pre class="language-text"><code>function liquidateBorrow(address borrower, uint amount, address collateral) returns (uint)
</code></pre></div><ul><li>msg.sender: The account which shall liquidate the borrower by repaying their debt and seizing their collateral.</li> <li>borrower: The account with negative <a href="https://compound.finance/docs/comptroller#account-liquidity" target="_blank" rel="noopener noreferrer">account liquidity<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> that shall be liquidated.</li> <li>repayAmount: The amount of the borrowed asset to be repaid and converted into collateral, specified in units of the underlying borrowed asset.</li> <li>fTokenCollateral: The address of the fToken currently held as collateral by a borrower, that the liquidator shall seize.</li> <li>RETURN: 0 on success, otherwise an <a href="https://compound.finance/docs/fTokens#error-codes" target="_blank" rel="noopener noreferrer">Error code<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>Before supplying an asset, users must first <a href="https://eips.ethereum.org/EIPS/eip-20#approve" target="_blank" rel="noopener noreferrer">approve<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> the fToken to access their token balance.</p> <h4 id="fether-4"><a href="#fether-4" class="header-anchor">#</a> fEther</h4> <div class="language- extra-class"><pre class="language-text"><code>function liquidateBorrow(address borrower, address fTokenCollateral) payable
</code></pre></div><ul><li>msg.valuepayable: The amount of ether to be repaid and converted into collateral, in wei.</li> <li>msg.sender: The account which shall liquidate the borrower by repaying their debt and seizing their collateral.</li> <li>borrower: The account with negative <a href="https://compound.finance/docs/comptroller#account-liquidity" target="_blank" rel="noopener noreferrer">account liquidity<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> that shall be liquidated.</li> <li>fTokenCollateral: The address of the fToken currently held as collateral by a borrower, that the liquidator shall seize.</li> <li>RETURN: No return, reverts on error.</li></ul> <h4 id="solidity-8"><a href="#solidity-8" class="header-anchor">#</a> Solidity</h4> <div class="language- extra-class"><pre class="language-text"><code>fEther fToken = fEther(0x3FDB...);

fERC20 fTokenCollateral = fERC20(0x3FDA...);

require(fToken.liquidateBorrow.value(100)(0xBorrower, fTokenCollateral) == 0, &quot;borrower underwater??&quot;);
</code></pre></div><h4 id="web3-1-0-8"><a href="#web3-1-0-8" class="header-anchor">#</a> Web3 1.0</h4> <div class="language- extra-class"><pre class="language-text"><code>const fToken = fERC20.at(0x3FDA...);

const fTokenCollateral = fEther.at(0x3FDB...);

await fToken.methods.liquidateBorrow(0xBorrower, 33, fTokenCollateral).send({from: 0xLiquidator});
</code></pre></div><h2 id="key-events"><a href="#key-events" class="header-anchor">#</a> Key Events</h2> <table><thead><tr><th>Event</th> <th>Description</th></tr></thead> <tbody><tr><td>Mint(address minter, uint mintAmount, uint mintTokens)</td> <td>Emitted upon a successful <a href="https://compound.finance/docs/fTokens#mint" target="_blank" rel="noopener noreferrer">Mint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</td></tr> <tr><td>Redeem(address redeemer, uint redeemAmount, uint redeemTokens)</td> <td>Emitted upon a successful <a href="https://compound.finance/docs/fTokens#redeem" target="_blank" rel="noopener noreferrer">Redeem<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</td></tr> <tr><td>Borrow(address borrower, uint borrowAmount, uint accountBorrows, uint totalBorrows)</td> <td>Emitted upon a successful <a href="https://compound.finance/docs/fTokens#borrow" target="_blank" rel="noopener noreferrer">Borrow<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</td></tr> <tr><td>RepayBorrow(address payer, address borrower, uint repayAmount, uint accountBorrows, uint totalBorrows)</td> <td>Emitted upon a successful <a href="https://compound.finance/docs/fTokens#repay-borrow" target="_blank" rel="noopener noreferrer">Repay Borrow<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</td></tr> <tr><td>LiquidateBorrow(address liquidator, address borrower, uint repayAmount, address fTokenCollateral, uint seizeTokens)</td> <td>Emitted upon a successful <a href="https://compound.finance/docs/fTokens#liquidate-borrow" target="_blank" rel="noopener noreferrer">Liquidate Borrow<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</td></tr></tbody></table> <h2 id="error-codes"><a href="#error-codes" class="header-anchor">#</a> Error Codes</h2> <table><thead><tr><th>Code</th> <th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>0</td> <td>NO_ERROR</td> <td>Not a failure.</td></tr> <tr><td>1</td> <td>UNAUTHORIZED</td> <td>The sender is not authorized to perform this action.</td></tr> <tr><td>2</td> <td>BAD_INPUT</td> <td>An invalid argument was supplied by the caller.</td></tr> <tr><td>3</td> <td>COMPTROLLER_REJECTION</td> <td>The action would violate the comptroller policy.</td></tr> <tr><td>4</td> <td>COMPTROLLER_CALCULATION_ERROR</td> <td>An internal calculation has failed in the comptroller.</td></tr> <tr><td>5</td> <td>INTEREST_RATE_MODEL_ERROR</td> <td>The interest rate model returned an invalid value.</td></tr> <tr><td>6</td> <td>INVALID_ACCOUNT_PAIR</td> <td>The specified combination of accounts is invalid.</td></tr> <tr><td>7</td> <td>INVALID_CLOSE_AMOUNT_REQUESTED</td> <td>The amount to liquidate is invalid.</td></tr> <tr><td>8</td> <td>INVALID_COLLATERAL_FACTOR</td> <td>The collateral factor is invalid.</td></tr> <tr><td>9</td> <td>MATH_ERROR</td> <td>A math calculation error occurred.</td></tr> <tr><td>10</td> <td>MARKET_NOT_FRESH</td> <td>Interest has not been properly accrued.</td></tr> <tr><td>11</td> <td>MARKET_NOT_LISTED</td> <td>The market is not currently listed by its comptroller.</td></tr> <tr><td>12</td> <td>TOKEN_INSUFFICIENT_ALLOWANCE</td> <td>ERC-20 contract must <em>allow</em> Money Market contract to call transferFrom. The current allowance is either 0 or less than the requested supply, repayBorrow or liquidate amount.</td></tr> <tr><td>13</td> <td>TOKEN_INSUFFICIENT_BALANCE</td> <td>Caller does not have sufficient balance in the ERC-20 contract to complete the desired action.</td></tr> <tr><td>14</td> <td>TOKEN_INSUFFICIENT_CASH</td> <td>The market does not have a sufficient cash balance to complete the transaction. You may attempt this transaction again later.</td></tr> <tr><td>15</td> <td>TOKEN_TRANSFER_IN_FAILED</td> <td>Failure in ERC-20 when transfering token into the market.</td></tr> <tr><td>16</td> <td>TOKEN_TRANSFER_OUT_FAILED</td> <td>Failure in ERC-20 when transfering token out of the market.</td></tr></tbody></table> <h2 id="failure-info"><a href="#failure-info" class="header-anchor">#</a> Failure Info</h2> <table><thead><tr><th>Code</th> <th>Name</th></tr></thead> <tbody><tr><td>0</td> <td>ACCEPT_ADMIN_PENDING_ADMIN_CHECK</td></tr> <tr><td>1</td> <td>ACCRUE_INTEREST_ACCUMULATED_INTEREST_CALCULATION_FAILED</td></tr> <tr><td>2</td> <td>ACCRUE_INTEREST_BORROW_RATE_CALCULATION_FAILED</td></tr> <tr><td>3</td> <td>ACCRUE_INTEREST_NEW_BORROW_INDEX_CALCULATION_FAILED</td></tr> <tr><td>4</td> <td>ACCRUE_INTEREST_NEW_TOTAL_BORROWS_CALCULATION_FAILED</td></tr> <tr><td>5</td> <td>ACCRUE_INTEREST_NEW_TOTAL_RESERVES_CALCULATION_FAILED</td></tr> <tr><td>6</td> <td>ACCRUE_INTEREST_SIMPLE_INTEREST_FACTOR_CALCULATION_FAILED</td></tr> <tr><td>7</td> <td>BORROW_ACCUMULATED_BALANCE_CALCULATION_FAILED</td></tr> <tr><td>8</td> <td>BORROW_ACCRUE_INTEREST_FAILED</td></tr> <tr><td>9</td> <td>BORROW_CASH_NOT_AVAILABLE</td></tr> <tr><td>10</td> <td>BORROW_FRESHNESS_CHECK</td></tr> <tr><td>11</td> <td>BORROW_NEW_TOTAL_BALANCE_CALCULATION_FAILED</td></tr> <tr><td>12</td> <td>BORROW_NEW_ACCOUNT_BORROW_BALANCE_CALCULATION_FAILED</td></tr> <tr><td>13</td> <td>BORROW_MARKET_NOT_LISTED</td></tr> <tr><td>14</td> <td>BORROW_COMPTROLLER_REJECTION</td></tr> <tr><td>15</td> <td>LIQUIDATE_ACCRUE_BORROW_INTEREST_FAILED</td></tr> <tr><td>16</td> <td>LIQUIDATE_ACCRUE_COLLATERAL_INTEREST_FAILED</td></tr> <tr><td>17</td> <td>LIQUIDATE_COLLATERAL_FRESHNESS_CHECK</td></tr> <tr><td>18</td> <td>LIQUIDATE_COMPTROLLER_REJECTION</td></tr> <tr><td>19</td> <td>LIQUIDATE_COMPTROLLER_CALCULATE_AMOUNT_SEIZE_FAILED</td></tr> <tr><td>20</td> <td>LIQUIDATE_CLOSE_AMOUNT_IS_UINT_MAX</td></tr> <tr><td>21</td> <td>LIQUIDATE_CLOSE_AMOUNT_IS_ZERO</td></tr> <tr><td>22</td> <td>LIQUIDATE_FRESHNESS_CHECK</td></tr> <tr><td>23</td> <td>LIQUIDATE_LIQUIDATOR_IS_BORROWER</td></tr> <tr><td>24</td> <td>LIQUIDATE_REPAY_BORROW_FRESH_FAILED</td></tr> <tr><td>25</td> <td>LIQUIDATE_SEIZE_BALANCE_INCREMENT_FAILED</td></tr> <tr><td>26</td> <td>LIQUIDATE_SEIZE_BALANCE_DECREMENT_FAILED</td></tr> <tr><td>27</td> <td>LIQUIDATE_SEIZE_COMPTROLLER_REJECTION</td></tr> <tr><td>28</td> <td>LIQUIDATE_SEIZE_LIQUIDATOR_IS_BORROWER</td></tr> <tr><td>29</td> <td>LIQUIDATE_SEIZE_TOO_MUCH</td></tr> <tr><td>30</td> <td>MINT_ACCRUE_INTEREST_FAILED</td></tr> <tr><td>31</td> <td>MINT_COMPTROLLER_REJECTION</td></tr> <tr><td>32</td> <td>MINT_EXCHANGE_CALCULATION_FAILED</td></tr> <tr><td>33</td> <td>MINT_EXCHANGE_RATE_READ_FAILED</td></tr> <tr><td>34</td> <td>MINT_FRESHNESS_CHECK</td></tr> <tr><td>35</td> <td>MINT_NEW_ACCOUNT_BALANCE_CALCULATION_FAILED</td></tr> <tr><td>36</td> <td>MINT_NEW_TOTAL_SUPPLY_CALCULATION_FAILED</td></tr> <tr><td>37</td> <td>MINT_TRANSFER_IN_FAILED</td></tr> <tr><td>38</td> <td>MINT_TRANSFER_IN_NOT_POSSIBLE</td></tr> <tr><td>39</td> <td>REDEEM_ACCRUE_INTEREST_FAILED</td></tr> <tr><td>40</td> <td>REDEEM_COMPTROLLER_REJECTION</td></tr> <tr><td>41</td> <td>REDEEM_EXCHANGE_TOKENS_CALCULATION_FAILED</td></tr> <tr><td>42</td> <td>REDEEM_EXCHANGE_AMOUNT_CALCULATION_FAILED</td></tr> <tr><td>43</td> <td>REDEEM_EXCHANGE_RATE_READ_FAILED</td></tr> <tr><td>44</td> <td>REDEEM_FRESHNESS_CHECK</td></tr> <tr><td>45</td> <td>REDEEM_NEW_ACCOUNT_BALANCE_CALCULATION_FAILED</td></tr> <tr><td>46</td> <td>REDEEM_NEW_TOTAL_SUPPLY_CALCULATION_FAILED</td></tr> <tr><td>47</td> <td>REDEEM_TRANSFER_OUT_NOT_POSSIBLE</td></tr> <tr><td>48</td> <td>REDUCE_RESERVES_ACCRUE_INTEREST_FAILED</td></tr> <tr><td>49</td> <td>REDUCE_RESERVES_ADMIN_CHECK</td></tr> <tr><td>50</td> <td>REDUCE_RESERVES_CASH_NOT_AVAILABLE</td></tr> <tr><td>51</td> <td>REDUCE_RESERVES_FRESH_CHECK</td></tr> <tr><td>52</td> <td>REDUCE_RESERVES_VALIDATION</td></tr> <tr><td>53</td> <td>REPAY_BEHALF_ACCRUE_INTEREST_FAILED</td></tr> <tr><td>54</td> <td>REPAY_BORROW_ACCRUE_INTEREST_FAILED</td></tr> <tr><td>55</td> <td>REPAY_BORROW_ACCUMULATED_BALANCE_CALCULATION_FAILED</td></tr> <tr><td>56</td> <td>REPAY_BORROW_COMPTROLLER_REJECTION</td></tr> <tr><td>57</td> <td>REPAY_BORROW_FRESHNESS_CHECK</td></tr> <tr><td>58</td> <td>REPAY_BORROW_NEW_ACCOUNT_BORROW_BALANCE_CALCULATION_FAILED</td></tr> <tr><td>59</td> <td>REPAY_BORROW_NEW_TOTAL_BALANCE_CALCULATION_FAILED</td></tr> <tr><td>60</td> <td>REPAY_BORROW_TRANSFER_IN_NOT_POSSIBLE</td></tr> <tr><td>61</td> <td>SET_COLLATERAL_FACTOR_OWNER_CHECK</td></tr> <tr><td>62</td> <td>SET_COLLATERAL_FACTOR_VALIDATION</td></tr> <tr><td>63</td> <td>SET_COMPTROLLER_OWNER_CHECK</td></tr> <tr><td>64</td> <td>SET_INTEREST_RATE_MODEL_ACCRUE_INTEREST_FAILED</td></tr> <tr><td>65</td> <td>SET_INTEREST_RATE_MODEL_FRESH_CHECK</td></tr> <tr><td>66</td> <td>SET_INTEREST_RATE_MODEL_OWNER_CHECK</td></tr> <tr><td>67</td> <td>SET_MAX_ASSETS_OWNER_CHECK</td></tr> <tr><td>68</td> <td>SET_ORACLE_MARKET_NOT_LISTED</td></tr> <tr><td>69</td> <td>SET_PENDING_ADMIN_OWNER_CHECK</td></tr> <tr><td>70</td> <td>SET_RESERVE_FACTOR_ACCRUE_INTEREST_FAILED</td></tr> <tr><td>71</td> <td>SET_RESERVE_FACTOR_ADMIN_CHECK</td></tr> <tr><td>72</td> <td>SET_RESERVE_FACTOR_FRESH_CHECK</td></tr> <tr><td>73</td> <td>SET_RESERVE_FACTOR_BOUNDS_CHECK</td></tr> <tr><td>74</td> <td>TRANSFER_COMPTROLLER_REJECTION</td></tr> <tr><td>75</td> <td>TRANSFER_NOT_ALLOWED</td></tr> <tr><td>76</td> <td>TRANSFER_NOT_ENOUGH</td></tr> <tr><td>77</td> <td>TRANSFER_TOO_MUCH</td></tr></tbody></table> <h2 id="exchange-rate"><a href="#exchange-rate" class="header-anchor">#</a> Exchange Rate</h2> <p>Each fToken is convertible into an ever increasing quantity of the underlying asset, as interest accrues in the market. The exchange rate between a fToken and the underlying asset is equal to:</p> <div class="language- extra-class"><pre class="language-text"><code>exchangeRate = (getCash() + totalBorrows() - totalReserves()) / totalSupply()
</code></pre></div><h4 id="ferc20-fether-5"><a href="#ferc20-fether-5" class="header-anchor">#</a> fERC20 / fEther</h4> <div class="language- extra-class"><pre class="language-text"><code>function exchangeRateCurrent() returns (uint)
</code></pre></div><ul><li>RETURN: The current exchange rate as an unsigned integer, scaled by 1e18.</li></ul> <h4 id="solidity-9"><a href="#solidity-9" class="header-anchor">#</a> Solidity</h4> <div class="language- extra-class"><pre class="language-text"><code>fERC20 fToken = fToken(0x3FDA...);

uint exchangeRateMantissa = fToken.exchangeRateCurrent();
</code></pre></div><h4 id="web3-1-0-9"><a href="#web3-1-0-9" class="header-anchor">#</a> Web3 1.0</h4> <div class="language- extra-class"><pre class="language-text"><code>const fToken = fEther.at(0x3FDB...);

const exchangeRate = (await fToken.methods.exchangeRateCurrent().call()) / 1e18;
</code></pre></div><p>Tip: note the use of call vs. send to invoke the function from off-chain without incurring gas costs.</p> <h2 id="get-cash"><a href="#get-cash" class="header-anchor">#</a> Get Cash</h2> <p>Cash is the amount of underlying balance owned by this fToken contract. One may query the total amount of cash currently available to this market.</p> <h4 id="ferc20-fether-6"><a href="#ferc20-fether-6" class="header-anchor">#</a> fERC20 / fEther</h4> <div class="language- extra-class"><pre class="language-text"><code>function getCash() returns (uint)
</code></pre></div><ul><li>RETURN: The quantity of underlying asset owned by the contract.</li></ul> <h4 id="solidity-10"><a href="#solidity-10" class="header-anchor">#</a> Solidity</h4> <div class="language- extra-class"><pre class="language-text"><code>fERC20 fToken = fToken(0x3FDA...);

uint cash = fToken.getCash();
</code></pre></div><h4 id="web3-1-0-10"><a href="#web3-1-0-10" class="header-anchor">#</a> Web3 1.0</h4> <div class="language- extra-class"><pre class="language-text"><code>const fToken = fEther.at(0x3FDB...);

const cash = (await fToken.methods.getCash().call());
</code></pre></div><h2 id="total-borrow"><a href="#total-borrow" class="header-anchor">#</a> Total Borrow</h2> <p>Total Borrows is the amount of underlying currently loaned out by the market, and the amount upon which interest is accumulated to suppliers of the market.</p> <h4 id="ferc20-fether-7"><a href="#ferc20-fether-7" class="header-anchor">#</a> fERC20 / fEther</h4> <div class="language- extra-class"><pre class="language-text"><code>function totalBorrowsCurrent() returns (uint)
</code></pre></div><ul><li>RETURN: The total amount of borrowed underlying, with interest.</li></ul> <h4 id="solidity-11"><a href="#solidity-11" class="header-anchor">#</a> Solidity</h4> <div class="language- extra-class"><pre class="language-text"><code>fERC20 fToken = fToken(0x3FDA...);

uint borrows = fToken.totalBorrowsCurrent();
</code></pre></div><h4 id="web3-1-0-11"><a href="#web3-1-0-11" class="header-anchor">#</a> Web3 1.0</h4> <div class="language- extra-class"><pre class="language-text"><code>const fToken = fEther.at(0x3FDB...);

const borrows = (await fToken.methods.totalBorrowsCurrent().call());
</code></pre></div><h2 id="borrow-balance"><a href="#borrow-balance" class="header-anchor">#</a> Borrow Balance</h2> <p>A user who borrows assets from the protocol is subject to accumulated interest based on the current <a href="https://compound.finance/docs/fTokens#borrow-rate" target="_blank" rel="noopener noreferrer">borrow rate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Interest is accumulated every block and integrations may use this function to obtain the current value of a user's borrow balance with interest.</p> <h4 id="ferc20-fether-8"><a href="#ferc20-fether-8" class="header-anchor">#</a> fERC20 / fEther</h4> <div class="language- extra-class"><pre class="language-text"><code>function borrowBalanceCurrent(address account) returns (uint)
</code></pre></div><ul><li>account: The account which borrowed the assets.</li> <li>RETURN: The user's current borrow balance (with interest) in units of the underlying asset.</li></ul> <h4 id="solidity-12"><a href="#solidity-12" class="header-anchor">#</a> Solidity</h4> <div class="language- extra-class"><pre class="language-text"><code>fERC20 fToken = fToken(0x3FDA...);

uint borrows = fToken.borrowBalanceCurrent(msg.caller);
</code></pre></div><h4 id="web3-1-0-12"><a href="#web3-1-0-12" class="header-anchor">#</a> Web3 1.0</h4> <div class="language- extra-class"><pre class="language-text"><code>const fToken = fEther.at(0x3FDB...);

const borrows = await fToken.methods.borrowBalanceCurrent(account).call();
</code></pre></div><h2 id="borrow-rate"><a href="#borrow-rate" class="header-anchor">#</a> Borrow Rate</h2> <p>At any point in time one may query the contract to get the current borrow rate per block.</p> <h4 id="ferc20-fether-9"><a href="#ferc20-fether-9" class="header-anchor">#</a> fERC20 / fEther</h4> <div class="language- extra-class"><pre class="language-text"><code>function borrowRatePerBlock() returns (uint)
</code></pre></div><ul><li>RETURN: The current borrow rate as an unsigned integer, scaled by 1e18.</li></ul> <h4 id="solidity-13"><a href="#solidity-13" class="header-anchor">#</a> Solidity</h4> <div class="language- extra-class"><pre class="language-text"><code>fERC20 fToken = fToken(0x3FDA...);

uint borrowRateMantissa = fToken.borrowRatePerBlock();
</code></pre></div><h4 id="web3-1-0-13"><a href="#web3-1-0-13" class="header-anchor">#</a> Web3 1.0</h4> <div class="language- extra-class"><pre class="language-text"><code>const fToken = fEther.at(0x3FDB...);

const borrowRate = (await fToken.methods.borrowRatePerBlock().call()) / 1e18;
</code></pre></div><h2 id="total-supply"><a href="#total-supply" class="header-anchor">#</a> Total Supply</h2> <p>Total Supply is the number of tokens currently in circulation in this fToken market. It is part of the EIP-20 interface of the fToken contract.</p> <h4 id="ferc20-fether-10"><a href="#ferc20-fether-10" class="header-anchor">#</a> fERC20 / fEther</h4> <div class="language- extra-class"><pre class="language-text"><code>function totalSupply() returns (uint)
</code></pre></div><ul><li>RETURN: The total number of tokens in circulation for the market.</li></ul> <h4 id="solidity-14"><a href="#solidity-14" class="header-anchor">#</a> Solidity</h4> <div class="language- extra-class"><pre class="language-text"><code>fERC20 fToken = fToken(0x3FDA...);

uint tokens = fToken.totalSupply();
</code></pre></div><h4 id="web3-1-0-14"><a href="#web3-1-0-14" class="header-anchor">#</a> Web3 1.0</h4> <div class="language- extra-class"><pre class="language-text"><code>const fToken = fEther.at(0x3FDB...);

const tokens = (await fToken.methods.totalSupply().call());
</code></pre></div><h2 id="underlying-balance"><a href="#underlying-balance" class="header-anchor">#</a> Underlying Balance</h2> <p>The user's underlying balance, representing their assets in the protocol, is equal to the user's fToken balance multiplied by the <a href="https://compound.finance/docs/fTokens#exchange-rate" target="_blank" rel="noopener noreferrer">Exchange Rate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h4 id="ferc20-fether-11"><a href="#ferc20-fether-11" class="header-anchor">#</a> fERC20 / fEther</h4> <div class="language- extra-class"><pre class="language-text"><code>function balanceOfUnderlying(address account) returns (uint)
</code></pre></div><ul><li>account: The account to get the underlying balance of.</li> <li>RETURN: The amount of underlying currently owned by the account.</li></ul> <h4 id="solidity-15"><a href="#solidity-15" class="header-anchor">#</a> Solidity</h4> <div class="language- extra-class"><pre class="language-text"><code>fERC20 fToken = fToken(0x3FDA...);

uint tokens = fToken.balanceOfUnderlying(msg.caller);
</code></pre></div><h4 id="web3-1-0-15"><a href="#web3-1-0-15" class="header-anchor">#</a> Web3 1.0</h4> <div class="language- extra-class"><pre class="language-text"><code>const fToken = fEther.at(0x3FDB...);

const tokens = await fToken.methods.balanceOfUnderlying(account).call();
</code></pre></div><h2 id="supply-rate"><a href="#supply-rate" class="header-anchor">#</a> Supply Rate</h2> <p>At any point in time one may query the contract to get the current supply rate per block. The supply rate is derived from the <a href="https://compound.finance/docs/fTokens#borrow-rate" target="_blank" rel="noopener noreferrer">borrow rate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://compound.finance/docs/fTokens#reserve-factor" target="_blank" rel="noopener noreferrer">reserve factor<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and the amount of <a href="https://compound.finance/docs/fTokens#total-borrows" target="_blank" rel="noopener noreferrer">total borrows<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h4 id="ferc20-fether-12"><a href="#ferc20-fether-12" class="header-anchor">#</a> fERC20 / fEther</h4> <div class="language- extra-class"><pre class="language-text"><code>function supplyRatePerBlock() returns (uint)
</code></pre></div><ul><li>RETURN: The current supply rate as an unsigned integer, scaled by 1e18.</li></ul> <h4 id="solidity-16"><a href="#solidity-16" class="header-anchor">#</a> Solidity</h4> <div class="language- extra-class"><pre class="language-text"><code>fERC20 fToken = fToken(0x3FDA...);

uint supplyRateMantissa = fToken.supplyRatePerBlock();
</code></pre></div><h4 id="web3-1-0-16"><a href="#web3-1-0-16" class="header-anchor">#</a> Web3 1.0</h4> <div class="language- extra-class"><pre class="language-text"><code>const fToken = fEther.at(0x3FDB...);

const supplyRate = (await fToken.methods.supplyRatePerBlock().call()) / 1e18;
</code></pre></div><h2 id="total-reserves"><a href="#total-reserves" class="header-anchor">#</a> Total Reserves</h2> <p>Reserves are an accounting entry in each fToken contract that represents a portion of historical interest set aside as <a href="https://compound.finance/docs/fTokens#cash" target="_blank" rel="noopener noreferrer">cash<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> which can be withdrawn or transferred through the protocol's governance. A small portion of borrower interest accrues into the protocol, determined by the <a href="https://compound.finance/docs/fTokens#reserve-factor" target="_blank" rel="noopener noreferrer">reserve factor<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h4 id="ferc20-fether-13"><a href="#ferc20-fether-13" class="header-anchor">#</a> fERC20 / fEther</h4> <div class="language- extra-class"><pre class="language-text"><code>function totalReserves() returns (uint)
</code></pre></div><ul><li>RETURN: The total amount of reserves held in the market.</li></ul> <h4 id="solidity-17"><a href="#solidity-17" class="header-anchor">#</a> Solidity</h4> <div class="language- extra-class"><pre class="language-text"><code>fERC20 fToken = fToken(0x3FDA...);

uint reserves = fToken.totalReserves();
</code></pre></div><h4 id="web3-1-0-17"><a href="#web3-1-0-17" class="header-anchor">#</a> Web3 1.0</h4> <div class="language- extra-class"><pre class="language-text"><code>const fToken = fEther.at(0x3FDB...);

const reserves = (await fToken.methods.totalReserves().call());
</code></pre></div><h2 id="reserve-factor"><a href="#reserve-factor" class="header-anchor">#</a> Reserve Factor</h2> <p>The reserve factor defines the portion of borrower interest that is converted into <a href="https://compound.finance/docs/fTokens#total-reserves" target="_blank" rel="noopener noreferrer">reserves<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h4 id="ferc20-fether-14"><a href="#ferc20-fether-14" class="header-anchor">#</a> fERC20 / fEther</h4> <div class="language- extra-class"><pre class="language-text"><code>function reserveFactorMantissa() returns (uint)
</code></pre></div><ul><li>RETURN: The current reserve factor as an unsigned integer, scaled by 1e18.</li></ul> <h4 id="solidity-18"><a href="#solidity-18" class="header-anchor">#</a> Solidity</h4> <div class="language- extra-class"><pre class="language-text"><code>fERC20 fToken = fToken(0x3FDA...);

uint reserveFactorMantissa = fToken.reserveFactorMantissa();
</code></pre></div><h4 id="web3-1-0-18"><a href="#web3-1-0-18" class="header-anchor">#</a> Web3 1.0</h4> <div class="language- extra-class"><pre class="language-text"><code>const fToken = fEther.at(0x3FDB...);

const reserveFactor = (await fToken.methods.reserveFactorMantissa().call()) / 1e18;
</code></pre></div><h2 id="interpreting-exchange-rates"><a href="#interpreting-exchange-rates" class="header-anchor">#</a> Interpreting Exchange Rates</h2> <p>The fToken <a href="https://compound.finance/docs/fTokens#exchange-rate" target="_blank" rel="noopener noreferrer">Exchange Rate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is scaled by the difference in decimals between the fToken and the underlying asset.</p> <div class="language- extra-class"><pre class="language-text"><code>onefTokenInUnderlying = exchangeRateCurrent / (1 * 10 ^ (18 + underlyingDecimals - fTokenDecimals))
</code></pre></div><p>Here is an example of finding the value of 1 fBAT in BAT with Web3.js JavaScript.</p> <div class="language- extra-class"><pre class="language-text"><code>const fTokenDecimals = 8; // all fTokens have 8 decimal places

const underlying = new web3.eth.Contract(erc20Abi, batAddress);

const fToken = new web3.eth.Contract(fTokenAbi, fBATAddress);

const underlyingDecimals = await underlying.methods.decimals().call();

const exchangeRateCurrent = await fToken.methods.exchangeRateCurrent().call();

const mantissa = 18 + parseInt(underlyingDecimals) - fTokenDecimals;

const onefTokenInUnderlying = exchangeRateCurrent / Math.pow(10, mantissa);

console.log('1 fBAT can be redeemed for', onefTokenInUnderlying, 'BAT');
</code></pre></div><p>There is no underlying contract for ETH, so to do this with fETH, set underlyingDecimals to 18.</p> <p>To find the number of underlying tokens that can be redeemed for fTokens, multiply the number of fTokens by the above value onefTokenInUnderlying.</p> <div class="language- extra-class"><pre class="language-text"><code>underlyingTokens = fTokenAmount * onefTokenInUnderlying
</code></pre></div><h2 id="calculating-accrued-interest"><a href="#calculating-accrued-interest" class="header-anchor">#</a> Calculating Accrued Interest</h2> <p>Interest rates for each market update on any block in which the ratio of borrowed assets to supplied assets in the market has changed. The amount interest rates are changed depends on the interest rate model smart contract implemented for the market, and the amount of change in the ratio of borrowed assets to supplied assets in the market.</p> <p>See the interest rate data visualization notebook on <a href="https://observablehq.com/@jflatow/compound-interest-rates" target="_blank" rel="noopener noreferrer">Observable<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to visualize which interest rate model is currently applied to each market.</p> <p>Historical interest rates can be retrieved from the <a href="https://compound.finance/docs/api#MarketHistoryService" target="_blank" rel="noopener noreferrer">MarketHistoryService API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Interest accrues to all suppliers and borrowers in a market when any Ethereum address interacts with the market’s fToken contract, calling one of these functions: mint, redeem, borrow, or repay. Successful execution of one of these functions triggers the accrueInterest method, which causes interest to be added to the underlying balance of every supplier and borrower in the market. Interest accrues for the current block, as well as each prior block in which the accrueInterest method was not triggered (no user interacted with the fToken contract). Interest compounds only during blocks in which the fToken contract has one of the aforementioned methods invoked.</p> <p>Here is an example of supply interest accrual:</p> <p>Alice supplies 1 ETH to the Fuse protocol. At the time of supply, the supplyRatePerBlock is 37893605 Wei, or 0.000000000037893605 ETH per block. No one interacts with the fETHer contract for 3 Ethereum blocks. On the subsequent 4th block, Bob borrows some ETH. Alice’s underlying balance is now 1.000000000151574420 ETH (which is 37893605 Wei times 4 blocks, plus the original 1 ETH). Alice’s underlying ETH balance in subsequent blocks will have interest accrued based on the new value of 1.000000000151574420 ETH instead of the initial 1 ETH. Note that the supplyRatePerBlock value may change at any time.</p> <h2 id="calculating-the-apy-using-rate-per-block"><a href="#calculating-the-apy-using-rate-per-block" class="header-anchor">#</a> Calculating the APY Using Rate Per Block</h2> <p>The Annual Percentage Yield (APY) for supplying or borrowing in each market can be calculated using the value of supplyRatePerBlock (for supply APY) or borrowRatePerBlock (for borrow APY) in this formula:</p> <div class="language- extra-class"><pre class="language-text"><code>Rate = fToken.supplyRatePerBlock(); // Integer

Rate = 37893566

ETH Mantissa = 1 * 10 ^ 18 (ETH has 18 decimal places)

Blocks Per Day = 4 * 60 * 24 (based on 4 blocks occurring every minute)

Days Per Year = 365

APY = ((((Rate / ETH Mantissa * Blocks Per Day + 1) ^ Days Per Year)) - 1) * 100
</code></pre></div><p>Here is an example of calculating the supply and borrow APY with Web3.js JavaScript:</p> <div class="language- extra-class"><pre class="language-text"><code>const ethMantissa = 1e18;

const blocksPerDay = 4 * 60 * 24;

const daysPerYear = 365;

const fToken = new web3.eth.Contract(fETHAbi, fETHAddress);

const supplyRatePerBlock = await fToken.methods.supplyRatePerBlock().call();

const borrowRatePerBlock = await fToken.methods.borrowRatePerBlock().call();

const supplyApy = (((Math.pow((supplyRatePerBlock / ethMantissa * blocksPerDay) + 1, daysPerYear))) - 1) * 100;

const borrowApy = (((Math.pow((borrowRatePerBlock / ethMantissa * blocksPerDay) + 1, daysPerYear))) - 1) * 100;

console.log(`Supply APY for ETH ${supplyApy} %`);

console.log(`Borrow APY for ETH ${borrowApy} %`);
</code></pre></div><h2 id="gas-costs"><a href="#gas-costs" class="header-anchor">#</a> Gas Costs</h2> <p>The gas usage of the protocol functions may fluctuate by market and user. External calls, such as to underlying ERC-20 tokens, may use an arbitrary amount of gas. Any calculations that involve checking <a href="https://compound.finance/docs/comptroller#account-liquidity" target="_blank" rel="noopener noreferrer">account liquidity<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, have gas costs that increase with the number of <a href="https://compound.finance/docs/comptroller#enter-markets" target="_blank" rel="noopener noreferrer">entered markets<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Thus, while it can be difficult to provide any guarantees about costs, we provide the table below for guidance:</p> <table><thead><tr><th>Function</th> <th>Typical Gas Cost</th></tr></thead> <tbody><tr><td>Mint</td> <td>&lt; 150K, fDAI &lt; 300k</td></tr> <tr><td>Redeem, Transfer</td> <td>&lt; 250K if borrowing, otherwise &lt; 90K</td></tr> <tr><td>Borrow</td> <td>&lt; 300K</td></tr> <tr><td>Repay Borrow</td> <td>&lt; 90K</td></tr> <tr><td>Liquidate Borrow</td> <td>&lt; 400K</td></tr></tbody></table></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Rari-Capital/docs/edit/master/docs/fuse/README.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/" class="prev router-link-active">
        Rari Capital Documentation
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.248c6343.js" defer></script><script src="/assets/js/2.f6688df7.js" defer></script><script src="/assets/js/12.3442bb6b.js" defer></script>
  </body>
</html>
